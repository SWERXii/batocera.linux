diff --git a/CMakeLists.txt b/CMakeLists.txt
index 5eab3c7..12730ba 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -65,6 +65,10 @@ if(MINGW AND NOT DEFINED USE_SYSTEM_FFMPEG)
 	set(USE_SYSTEM_FFMPEG ON)
 endif()
 
+if(MESA_EGL_NO_X11_HEADERS)
+	add_definitions(-DMESA_EGL_NO_X11_HEADERS)
+endif()
+
 if(NOT ANDROID AND NOT IOS)
 	if(ARM_DEVICE OR SIMULATOR)
 		set(USING_EGL ON)
